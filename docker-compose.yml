version: "2"
services:
    nginx:
        depends_on: 
            - php
        image: nginx:latest
        volumes:
            # nginx config
            - ./nginx/:/etc/nginx/conf.d
            # dist html
            - ./app/html:/opt/html
        ports: 
            - 9000:80
    php-fpm:
        build: ./php
        working_dir: /opt/php
        command: bash -c "php-fpm && composer install"
        volumes: 
            # php code
            - ./app/php:/opt/php